<div>
    <ngx-spinner bdColor="rgba(0,0,0,1)" [fullScreen]="true" type="ball-clip-rotate-multiple" size="large">
    </ngx-spinner>
    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <div class="row">
                <div class="col-md-3">
                    <h1 class="display-2 text-center">Sequencing all 70,000</h1>
                    <h1 class="display-2 text-center">eukaryotic species of</h1>
                    <h1 class="display-2 text-center">Britain and Ireland </h1>
                </div>
            </div>
        </div>
    </div>

    <div class="container" style="padding-top: 20px;">
        <div class="row">
            <div class="col-md-2">
                <div class="row">
                    <div class="col-md-12 col-sm-6">
                        <div class="card bg-lite mb-3 filter-top">
                            <h3 class="card-header filter-heading">
                                <span #lbltextTrack>Tracking Status</span>
                                <i class="material-icons float-right tracking-status-inactive"
                                    *ngIf="trackingSystemFilters.length > 3 && isTrackCollapsed"
                                    (click)="toggleCollapse(lbltextTrack.innerText)">add</i>
                                <i class="material-icons float-right tracking-status-inactive"
                                    *ngIf="trackingSystemFilters.length > 3 && !isTrackCollapsed"
                                    (click)="toggleCollapse(lbltextTrack.innerText)">remove</i>
                            </h3>
                            <ul id="tracking-status-inactive" class="list-group"
                                [ngClass]="{'long-list': itemLimitTrackFilter > filterSize}">
                                <ng-container *ngFor="let filter of trackingSystemFilters; let i = index">
                                    <li id="i"
                                        class="list-group-item d-flex justify-content-between align-items-center tracking-status-inactive"
                                        [ngClass]="checkFilterIsActive(filter.key)"
                                        (click)="onFilterClick($event, lbltextTrack.innerText, filter.key)"
                                        style="cursor: pointer; padding: .75rem 0.25rem;"
                                        *ngIf="i<itemLimitTrackFilter && filter.key != ''">
                                        {{filter.key}}
                                        <span class="badge badge-pill badge-info">{{filter.doc_count}}</span>
                                    </li>
                                </ng-container>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- Ontalogy aware filters -->
                <div class="row">
                    <div class="col-md-12 col-sm-6">
                        <div class="card bg-lite mb-3 filter-top">
                            <h3 class="card-header filter-heading">
                                <span>Ontology</span>
                                <i class="material-icons float-right" data-backdrop="static" data-keyboard="false"
                                    (click)="showModal()">add</i>

                            </h3>
                            <ul id="ontology-inactive" class="list-group"
                                [ngClass]="{'long-list': selectedTaxonomy.length > filterSize}">
                                <ng-container *ngFor="let filter of selectedTaxonomy; let i = index">
                                    <li id="{{i}}"
                                        class="list-group-item d-flex justify-content-between align-items-center active-filter"
                                        style="cursor: pointer; padding: .75rem 0.25rem;"
                                        *ngIf="i<selectedTaxonomy.length && filter.taxonomy != ''"
                                        (click)="removeTaxaFilter()">
                                        {{filter.taxonomy}}
                                        <i class="material-icons float-right">remove</i>
                                    </li>
                                </ng-container>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <h1 class="page-header">Organisms</h1>
                <h1 *ngIf="activeFilters.length !== 0">Filters:
                    <button type="button" class="btn btn-success" *ngFor="let filter of activeFilters">
                        {{filter}}
                        <span class="badge badge-light" (click)="removeFilter(filter)">X</span>
                    </button>
                    <button type="button" class="btn btn-primary" (click)="removeAllFilters()">
                        Remove all filters
                    </button>
                </h1>
                <mat-form-field>
                    <mat-label>Search</mat-label>
                    <input #searchInput matInput [(ngModel)]='searchText' (keyup)="getSearchResults()"
                        placeholder="Ex. lutra" #input>
                </mat-form-field>
                <table mat-table #table [dataSource]="dataSource" matSort (matSortChange)="customSort($event)">
                    <ng-container matColumnDef="organism">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Organism </mat-header-cell>
                        <mat-cell *matCellDef="let element" class="txt-center">
                            <a [routerLink]="['/data/root/details/', element.organism]">
                                {{element.organism}} </a>
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="commonName">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Common Name </mat-header-cell>
                        <mat-cell *matCellDef="let element" class="txt-center"> {{element?.commonName}}</mat-cell>
                    </ng-container>

                    <!-- <ng-container matColumnDef="sex">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Sex </mat-header-cell>
                        <mat-cell *matCellDef="let element" class="txt-center"> {{element.sex}} </mat-cell>
                    </ng-container> -->

                    <ng-container matColumnDef="trackingSystem">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Tracking status </mat-header-cell>
                        <mat-cell *matCellDef="let element" class="txt-center">
                            <span [ngClass]="getStatusClass(element.trackingSystem)">{{element.trackingSystem}}</span>
                        </mat-cell>
                    </ng-container>

                    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
                </table>
                <mat-paginator [pageSizeOptions]="[20, 30, 50, 100]" showFirstLastButtons [length]="bioSampleTotalCount"
                    (page)="pageChanged($event)"></mat-paginator>
            </div>
        </div>
    </div>

    <div class="modal fade" id="taxonomyModal" tabindex="-1" role="dialog" aria-labelledby="ontologyModal"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title modal-heading" id="ontologyModal" modal-heading>Taxonomy Rank <span
                            id="tooltip" data-toggle="tooltip" data-placement="top"
                            title="Double click to select rank">&#9432;</span></h1>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                        (click)="resetOntologyList()">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <ul id="myUL">
                        <li><span class="caret" id="root" (click)="toggleTaxanomy('root-list','root')"><i class="fas fa-plus-circle"></i>Root</span>
                            <hr>
                            <ul class="nested" id="root-list">
                                <li><span id="cellular" class="caret"
                                        (click)="toggleTaxanomy('Eukaryota-superkingdom','cellular')"><i class="fas fa-plus-circle"></i>Cellular
                                        Organisms</span>
                                    <span class="badge badge-pill badge-success">{{bioSampleTotalCount}}</span>
                                    <hr>
                                    <!-- Super kingdom -->
                                    <ul class="nested" id="Eukaryota-superkingdom">
                                        <li *ngFor="let element of childTaxanomy.cellularorganism[0].childData">
                                            <span class="caret" id="Eukaryota-superkingdom"
                                                (click)="getChildTaxonomyRank(childTaxanomy.cellularorganism[0].rank, element.key, 'kingdom')"
                                                (dblclick)="filterTaxonomy(childTaxanomy.cellularorganism[0].rank, element.key, 'kingdom')">
                                                <i class="fas fa-plus-circle"></i>{{element.key}}
                                            </span>
                                            <span class="badge badge-pill badge-success">{{bioSampleTotalCount}}</span>
                                            <hr>
                                            <!-- kingdom level -->
                                            <ul class="nested {{element.key}}-kingdom"
                                                *ngIf="childTaxanomy.superkingdom.length > 0">
                                                <ng-container *ngFor="let super of childTaxanomy.superkingdom">
                                                    <ng-container *ngIf="element.key == super.parent">
                                                        <li *ngFor="let superchild of super.childData">
                                                            <span class="caret" id="{{superchild.key}}-{{super.rank}}"
                                                                (click)="getChildTaxonomyRank(super.rank, superchild.key, 'subkingdom')"
                                                                (dblclick)="filterTaxonomy(super.rank, superchild.key, 'subkingdom')">
                                                                <i class="fas fa-plus-circle"></i>{{superchild.key}}
                                                            </span>
                                                            <span
                                                                class="badge badge-pill badge-success">{{superchild.doc_count}}</span>
                                                            <hr>
                                                            <!-- subkingdom level -->
                                                            <ul class="nested {{superchild.key}}-subkingdom"
                                                                *ngIf="childTaxanomy.kingdom.length > 0">
                                                                <ng-container
                                                                    *ngFor="let king of childTaxanomy.kingdom">
                                                                    <ng-container
                                                                        *ngIf="superchild.key === king.parent">
                                                                        <li *ngFor="let kingchild of king.childData">
                                                                            <span class="caret"
                                                                                id="{{kingchild.key}}-{{king.rank}}"
                                                                                (click)="getChildTaxonomyRank(king.rank, kingchild.key, 'superphylum')"
                                                                                (dblclick)="filterTaxonomy(king.rank, kingchild.key, 'superphylum')">
                                                                                <i class="fas fa-plus-circle"></i>{{kingchild.key}}
                                                                            </span>
                                                                            <span
                                                                                class="badge badge-pill badge-success">{{kingchild.doc_count}}</span>
                                                                            <hr>
                                                                            <!-- superphylum level -->
                                                                            <ul class="nested {{kingchild.key}}-superphylum"
                                                                                *ngIf="childTaxanomy.subkingdom.length > 0">
                                                                                <ng-container
                                                                                    *ngFor="let subkingdom of childTaxanomy.subkingdom">
                                                                                    <ng-container
                                                                                        *ngIf="kingchild.key === subkingdom.parent">
                                                                                        <li
                                                                                            *ngFor="let subkingchild of subkingdom.childData">
                                                                                            <span class="caret"
                                                                                                id="{{subkingchild.key}}-{{subkingdom.rank}}"
                                                                                                (click)="getChildTaxonomyRank(subkingdom.rank, subkingchild.key, 'phylum')"
                                                                                                (dblclick)="filterTaxonomy(subkingdom.rank, subkingchild.key, 'phylum')">
                                                                                                <i class="fas fa-plus-circle"></i>{{subkingchild.key}}
                                                                                            </span>
                                                                                            <span
                                                                                                class="badge badge-pill badge-success">{{subkingchild.doc_count}}</span>
                                                                                            <hr>
                                                                                            <!-- phylum level -->
                                                                                            <ul class="nested {{subkingchild.key}}-phylum"
                                                                                                *ngIf="childTaxanomy.superphylum.length > 0">
                                                                                                <ng-container
                                                                                                    *ngFor="let superphylum of childTaxanomy.superphylum">
                                                                                                    <ng-container
                                                                                                        *ngIf="subkingchild.key === superphylum.parent">
                                                                                                        <li
                                                                                                            *ngFor="let superphylumchild of superphylum.childData">
                                                                                                            <span
                                                                                                                class="caret"
                                                                                                                id="{{superphylumchild.key}}-{{superphylum.rank}}"
                                                                                                                (click)="getChildTaxonomyRank(superphylum.rank, superphylumchild.key, 'subphylum')"
                                                                                                                (dblclick)="filterTaxonomy(superphylum.rank, superphylumchild.key, 'subphylum')">
                                                                                                                <i class="fas fa-plus-circle"></i>{{superphylumchild.key}}
                                                                                                            </span>
                                                                                                            <span
                                                                                                                class="badge badge-pill badge-success">{{superphylumchild.doc_count}}</span>
                                                                                                            <hr>
                                                                                                            <!-- subphylum level -->
                                                                                                            <ul class="nested {{superphylumchild.key}}-subphylum"
                                                                                                                *ngIf="childTaxanomy.phylum.length > 0">
                                                                                                                <ng-container
                                                                                                                    *ngFor="let phylum of childTaxanomy.phylum">
                                                                                                                    <ng-container
                                                                                                                        *ngIf="superphylumchild.key === phylum.parent">
                                                                                                                        <li
                                                                                                                            *ngFor="let phylChild of phylum.childData">
                                                                                                                            <span
                                                                                                                                class="caret"
                                                                                                                                id="{{phylChild.key}}-{{phylum.rank}}"
                                                                                                                                (click)="getChildTaxonomyRank(phylum.rank, phylChild.key, 'superclass')"
                                                                                                                                (dblclick)="filterTaxonomy(phylum.rank, phylChild.key, 'superclass')">
                                                                                                                                <i class="fas fa-plus-circle"></i>{{phylChild.key}}
                                                                                                                            </span>
                                                                                                                            <span
                                                                                                                                class="badge badge-pill badge-success">{{phylChild.doc_count}}</span>
                                                                                                                            <hr>
                                                                                                                            <!-- superclass level -->
                                                                                                                            <ul class="nested {{phylChild.key}}-superclass"
                                                                                                                                *ngIf="childTaxanomy.subphylum.length > 0">
                                                                                                                                <ng-container
                                                                                                                                    *ngFor="let subphylum of childTaxanomy.subphylum">
                                                                                                                                    <ng-container
                                                                                                                                        *ngIf="phylChild.key === subphylum.parent">
                                                                                                                                        <li
                                                                                                                                            *ngFor="let subphylumChild of subphylum.childData">
                                                                                                                                            <span
                                                                                                                                                class="caret"
                                                                                                                                                id="{{subphylumChild.key}}-{{subphylum.rank}}"
                                                                                                                                                (click)="getChildTaxonomyRank(subphylum.rank, subphylumChild.key, 'class')"
                                                                                                                                                (dblclick)="filterTaxonomy(subphylum.rank, subphylumChild.key, 'class')">
                                                                                                                                                <i class="fas fa-plus-circle"></i>{{subphylumChild.key}}
                                                                                                                                            </span>
                                                                                                                                            <span
                                                                                                                                                class="badge badge-pill badge-success">{{subphylumChild.doc_count}}</span>
                                                                                                                                            <hr>
                                                                                                                                            <!-- class level -->
                                                                                                                                            <ul class="nested {{subphylumChild.key}}-class"
                                                                                                                                                *ngIf="childTaxanomy.superclass.length > 0">
                                                                                                                                                <ng-container
                                                                                                                                                    *ngFor="let superclass of childTaxanomy.superclass">
                                                                                                                                                    <ng-container
                                                                                                                                                        *ngIf="subphylumChild.key === superclass.parent">
                                                                                                                                                        <li
                                                                                                                                                            *ngFor="let superclassChild of superclass.childData">
                                                                                                                                                            <span
                                                                                                                                                                class="caret"
                                                                                                                                                                id="{{superclassChild.key}}-{{superclass.rank}}"
                                                                                                                                                                (click)="getChildTaxonomyRank(superclass.rank, superclassChild.key, 'infraclass')"
                                                                                                                                                                (dblclick)="filterTaxonomy(superclass.rank, superclassChild.key, 'infraclass')">
                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{superclassChild.key}}
                                                                                                                                                            </span>
                                                                                                                                                            <span
                                                                                                                                                                class="badge badge-pill badge-success">{{superclassChild.doc_count}}</span>
                                                                                                                                                            <hr>
                                                                                                                                                            <!-- infraclass level -->
                                                                                                                                                            <ul class="nested {{superclassChild.key}}-infraclass"
                                                                                                                                                                *ngIf="childTaxanomy.class.length > 0">
                                                                                                                                                                <ng-container
                                                                                                                                                                    *ngFor="let class of childTaxanomy.class">
                                                                                                                                                                    <ng-container
                                                                                                                                                                        *ngIf="superclassChild.key === class.parent">
                                                                                                                                                                        <li
                                                                                                                                                                            *ngFor="let classChild of class.childData">
                                                                                                                                                                            <span
                                                                                                                                                                                class="caret"
                                                                                                                                                                                id="{{classChild.key}}-{{class.rank}}"
                                                                                                                                                                                (click)="getChildTaxonomyRank(class.rank, classChild.key, 'cohort')"
                                                                                                                                                                                (dblclick)="filterTaxonomy(class.rank, classChild.key, 'cohort')">
                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{classChild.key}}
                                                                                                                                                                            </span>
                                                                                                                                                                            <span
                                                                                                                                                                                class="badge badge-pill badge-success">{{classChild.doc_count}}</span>
                                                                                                                                                                            <hr>
                                                                                                                                                                            <!-- cohort level -->
                                                                                                                                                                            <ul class="nested {{classChild.key}}-cohort"
                                                                                                                                                                                *ngIf="childTaxanomy.infraclass.length > 0">
                                                                                                                                                                                <ng-container
                                                                                                                                                                                    *ngFor="let infraclass of childTaxanomy.infraclass">
                                                                                                                                                                                    <ng-container
                                                                                                                                                                                        *ngIf="classChild.key === infraclass.parent">
                                                                                                                                                                                        <li
                                                                                                                                                                                            *ngFor="let infraclassChild of infraclass.childData">
                                                                                                                                                                                            <span
                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                id="{{infraclassChild.key}}-{{infraclass.rank}}"
                                                                                                                                                                                                (click)="getChildTaxonomyRank(infraclass.rank, infraclassChild.key, 'subcohort')"
                                                                                                                                                                                                (dblclick)="filterTaxonomy(infraclass.rank, infraclassChild.key, 'subcohort')">
                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{infraclassChild.key}}
                                                                                                                                                                                            </span>
                                                                                                                                                                                            <span
                                                                                                                                                                                                class="badge badge-pill badge-success">{{infraclassChild.doc_count}}</span>
                                                                                                                                                                                            <hr>
                                                                                                                                                                                            <!-- subcohort level -->
                                                                                                                                                                                            <ul class="nested {{infraclassChild.key}}-subcohort"
                                                                                                                                                                                                *ngIf="childTaxanomy.cohort.length > 0">
                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                    *ngFor="let cohort of childTaxanomy.cohort">
                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                        *ngIf="infraclassChild.key === cohort.parent">
                                                                                                                                                                                                        <li
                                                                                                                                                                                                            *ngFor="let cohortChild of cohort.childData">
                                                                                                                                                                                                            <span
                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                id="{{cohortChild.key}}-{{cohort.rank}}"
                                                                                                                                                                                                                (click)="getChildTaxonomyRank(cohort.rank, cohortChild.key, 'superorder')"
                                                                                                                                                                                                                (dblclick)="filterTaxonomy(cohort.rank, cohortChild.key, 'superorder')">
                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{cohortChild.key}}
                                                                                                                                                                                                            </span>
                                                                                                                                                                                                            <span
                                                                                                                                                                                                                class="badge badge-pill badge-success">{{cohortChild.doc_count}}</span>
                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                            <!-- superorder level -->
                                                                                                                                                                                                            <ul class="nested {{cohortChild.key}}-superorder"
                                                                                                                                                                                                                *ngIf="childTaxanomy.subcohort.length > 0">
                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                    *ngFor="let subcohort of childTaxanomy.subcohort">
                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                        *ngIf="cohortChild.key === subcohort.parent">
                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                            *ngFor="let subcohortChild of subcohort.childData">
                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                id="{{subcohortChild.key}}-{{subcohort.rank}}"
                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(subcohort.rank, subcohortChild.key, 'order')"
                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(subcohort.rank, subcohortChild.key, 'order')">
                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{subcohortChild.key}}
                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{subcohortChild.doc_count}}</span>
                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                            <!-- order level -->
                                                                                                                                                                                                                            <ul class="nested {{subcohortChild.key}}-order"
                                                                                                                                                                                                                                *ngIf="childTaxanomy.superorder.length > 0">
                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                    *ngFor="let superorder of childTaxanomy.superorder">
                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                        *ngIf="subcohortChild.key === superorder.parent">
                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                            *ngFor="let superorderChild of superorder.childData">
                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                id="{{superorderChild.key}}-{{superorder.rank}}"
                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(superorder.rank, superorderChild.key, 'parvorder')"
                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(superorder.rank, superorderChild.key, 'parvorder')">
                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{superorderChild.key}}
                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{superorderChild.doc_count}}</span>
                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                            <!-- parvorder level -->
                                                                                                                                                                                                                                            <ul class="nested {{superorderChild.key}}-parvorder"
                                                                                                                                                                                                                                                *ngIf="childTaxanomy.order.length > 0">
                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                    *ngFor="let order of childTaxanomy.order">
                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                        *ngIf="superorderChild.key === order.parent">
                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                            *ngFor="let orderChild of order.childData">
                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                id="{{orderChild.key}}-{{order.rank}}"
                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(order.rank, orderChild.key, 'suborder')"
                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(order.rank, orderChild.key, 'suborder')">
                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{orderChild.key}}
                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{orderChild.doc_count}}</span>
                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                            <!-- suborder level -->
                                                                                                                                                                                                                                                            <ul class="nested {{orderChild.key}}-suborder"
                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.parvorder.length > 0">
                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                    *ngFor="let parvorder of childTaxanomy.parvorder">
                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                        *ngIf="orderChild.key === parvorder.parent">
                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                            *ngFor="let parvorderChild of parvorder.childData">
                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                id="{{parvorderChild.key}}-{{parvorder.rank}}"
                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(parvorder.rank, parvorderChild.key, 'infraorder')"
                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(parvorder.rank, parvorderChild.key, 'infraorder')">
                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{parvorderChild.key}}
                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{parvorderChild.doc_count}}</span>
                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                            <!-- infraorder level -->
                                                                                                                                                                                                                                                                            <ul class="nested {{parvorderChild.key}}-infraorder"
                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.suborder.length > 0">
                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                    *ngFor="let suborder of childTaxanomy.suborder">
                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                        *ngIf="parvorderChild.key === suborder.parent">
                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                            *ngFor="let suborderChild of suborder.childData">
                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                id="{{suborderChild.key}}-{{suborder.rank}}"
                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(suborder.rank, suborderChild.key, 'section')"
                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(suborder.rank, suborderChild.key, 'section')">
                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{suborderChild.key}}
                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{suborderChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                            <!-- section level -->
                                                                                                                                                                                                                                                                                            <ul class="nested {{suborderChild.key}}-section"
                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.infraorder.length > 0">
                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                    *ngFor="let infraorder of childTaxanomy.infraorder">
                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                        *ngIf="suborderChild.key === infraorder.parent">
                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                            *ngFor="let infraorderChild of infraorder.childData">
                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                id="{{infraorderChild.key}}-{{infraorder.rank}}"
                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(infraorder.rank, infraorderChild.key, 'subsection')"
                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(infraorder.rank, infraorderChild.key, 'subsection')">
                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{infraorderChild.key}}
                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{infraorderChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                            <!-- subsection level -->
                                                                                                                                                                                                                                                                                                            <ul class="nested {{infraorderChild.key}}-subsection"
                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.section.length > 0">
                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                    *ngFor="let section of childTaxanomy.section">
                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                        *ngIf="infraorderChild.key === section.parent">
                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                            *ngFor="let sectionChild of section.childData">
                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                id="{{sectionChild.key}}-{{section.rank}}"
                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(section.rank, sectionChild.key, 'superfamily')"
                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(section.rank, sectionChild.key, 'superfamily')">
                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{sectionChild.key}}
                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{sectionChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                            <!-- superfamily level -->
                                                                                                                                                                                                                                                                                                                            <ul class="nested {{sectionChild.key}}-superfamily"
                                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.subsection.length > 0">
                                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                                    *ngFor="let subsection of childTaxanomy.subsection">
                                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                                        *ngIf="sectionChild.key === subsection.parent">
                                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                                            *ngFor="let subsectionChild of subsection.childData">
                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                                id="{{subsectionChild.key}}-{{subsection.rank}}"
                                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(subsection.rank, subsectionChild.key, 'family')"
                                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(subsection.rank, subsectionChild.key, 'family')">
                                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{subsectionChild.key}}
                                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{sectionChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                                            <!-- family level -->
                                                                                                                                                                                                                                                                                                                                            <ul class="nested {{subsectionChild.key}}-family"
                                                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.superfamily.length > 0">
                                                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                                                    *ngFor="let superfamily of childTaxanomy.superfamily">
                                                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                                                        *ngIf="subsectionChild.key === superfamily.parent">
                                                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                                                            *ngFor="let superfamilyChild of superfamily.childData">
                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                                                id="{{superfamilyChild.key}}-{{superfamily.rank}}"
                                                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(superfamily.rank, superfamilyChild.key, 'subfamily')"
                                                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(superfamily.rank, superfamilyChild.key, 'subfamily')">
                                                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{superfamilyChild.key}}
                                                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{superfamilyChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                                                            <!-- subfamily level -->
                                                                                                                                                                                                                                                                                                                                                            <ul class="nested {{superfamilyChild.key}}-subfamily"
                                                                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.family.length > 0">
                                                                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                                                                    *ngFor="let family of childTaxanomy.family">
                                                                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                                                                        *ngIf="superfamilyChild.key === family.parent">
                                                                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                                                                            *ngFor="let familyChild of family.childData">
                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                                                                id="{{familyChild.key}}-{{family.rank}}"
                                                                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(family.rank, familyChild.key, 'tribe')"
                                                                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(family.rank, familyChild.key, 'tribe')">
                                                                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{familyChild.key}}
                                                                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{familyChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                                                                            <!-- tribe level -->
                                                                                                                                                                                                                                                                                                                                                                            <ul class="nested {{familyChild.key}}-tribe"
                                                                                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.subfamily.length > 0">
                                                                                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                                                                                    *ngFor="let subfamily of childTaxanomy.subfamily">
                                                                                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                                                                                        *ngIf="familyChild.key === subfamily.parent">
                                                                                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                                                                                            *ngFor="let subfamilyChild of subfamily.childData">
                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                                                                                id="{{subfamilyChild.key}}-{{subfamily.rank}}"
                                                                                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(subfamily.rank, subfamilyChild.key, 'subtribe')"
                                                                                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(subfamily.rank, subfamilyChild.key, 'subtribe')">
                                                                                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{subfamilyChild.key}}
                                                                                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{subfamilyChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                                                                                            <!-- subtribe level -->
                                                                                                                                                                                                                                                                                                                                                                                            <ul class="nested {{subfamilyChild.key}}-subtribe"
                                                                                                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.tribe.length > 0">
                                                                                                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                    *ngFor="let tribe of childTaxanomy.tribe">
                                                                                                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                        *ngIf="subfamilyChild.key === tribe.parent">
                                                                                                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                                                                                                            *ngFor="let tribeChild of tribe.childData">
                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                                                                                                id="{{tribeChild.key}}-{{tribe.rank}}"
                                                                                                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(tribe.rank, tribeChild.key, 'genus')"
                                                                                                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(tribe.rank, tribeChild.key, 'genus')">
                                                                                                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{tribeChild.key}}
                                                                                                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{tribeChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                                                                                                            <!-- genus level -->
                                                                                                                                                                                                                                                                                                                                                                                                            <ul class="nested {{tribeChild.key}}-genus"
                                                                                                                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.subtribe.length > 0">
                                                                                                                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                    *ngFor="let subtribe of childTaxanomy.subtribe">
                                                                                                                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                        *ngIf="tribeChild.key === subtribe.parent">
                                                                                                                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                                                                                                                            *ngFor="let subtribeChild of subtribe.childData">
                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                                                                                                                id="{{subtribeChild.key}}-{{subtribe.rank}}"
                                                                                                                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(subtribe.rank, subtribeChild.key, 'series')"
                                                                                                                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(subtribe.rank, subtribeChild.key, 'series')">
                                                                                                                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{subtribeChild.key}}
                                                                                                                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{subtribeChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                            <!-- series level -->
                                                                                                                                                                                                                                                                                                                                                                                                                            <ul class="nested {{subtribeChild.key}}-series"
                                                                                                                                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.genus.length > 0">
                                                                                                                                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                    *ngFor="let genus of childTaxanomy.genus">
                                                                                                                                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                        *ngIf="subtribeChild.key === genus.parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                                                                                                                                            *ngFor="let genusChild of genus.childData">
                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                                                                                                                                id="{{genusChild.key}}-{{genus.rank}}"
                                                                                                                                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(genus.rank, genusChild.key, 'subgenus')"
                                                                                                                                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(genus.rank, genusChild.key, 'subgenus')">
                                                                                                                                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{genusChild.key}}
                                                                                                                                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{genusChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <!-- subgenus level -->
                                                                                                                                                                                                                                                                                                                                                                                                                                            <ul class="nested {{genusChild.key}}-subgenus"
                                                                                                                                                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.series.length > 0">
                                                                                                                                                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                                    *ngFor="let series of childTaxanomy.series">
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                                        *ngIf="genusChild.key === series.parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                                                                                                                                                            *ngFor="let seriesChild of series.childData">
                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                id="{{seriesChild.key}}-{{series.rank}}"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(series.rank, seriesChild.key, 'species_group')"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(series.rank, seriesChild.key, 'species_group')">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{seriesChild.key}}
                                                                                                                                                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{seriesChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            <!-- species_group level -->
                                                                                                                                                                                                                                                                                                                                                                                                                                                            <ul class="nested {{seriesChild.key}}-species_group"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.subgenus.length > 0">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *ngFor="let subgenus of childTaxanomy.subgenus">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *ngIf="seriesChild.key === subgenus.parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *ngFor="let subgenusChild of subgenus.childData">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                id="{{subgenusChild.key}}-{{subgenus.rank}}"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(subgenus.rank, subgenusChild.key, 'species_subgroup')"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(subgenus.rank, subgenusChild.key, 'species_subgroup')">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{subgenusChild.key}}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{subgenusChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <!-- species_subgroup level -->
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <ul class="nested {{subgenusChild.key}}-species_subgroup"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.species_group.length > 0">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *ngFor="let speciesgroup of childTaxanomy.species_group">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *ngIf="subgenusChild.key === species_group.parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *ngFor="let speciesgroupChild of species_group.childData">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                id="{{speciesgroupChild.key}}-{{speciesgroup.rank}}"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(speciesgroup.rank, speciesgroupChild.key, 'species')"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(speciesgroup.rank, speciesgroupChild.key, 'species')">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{speciesgroupChild.key}}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{speciesgroupChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <!-- species level -->
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <ul class="nested {{speciesgroupChild.key}}-species"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.species_subgroup.length > 0">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *ngFor="let speciessubgroup of childTaxanomy.species_subgroup">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *ngIf="speciesgroupChild.key === species_subgroup.parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *ngFor="let speciessubgroupChild of species_subgroup.childData">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                id="{{speciessubgroupChild.key}}-{{speciessubgroup.rank}}"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(speciessubgroup.rank, speciessubgroupChild.key, 'subspecies')"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(speciessubgroup.rank, speciessubgroupChild.key, 'subspecies')">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{speciessubgroupChild.key}}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{speciessubgroupChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <!-- subspecies level -->
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <ul class="nested {{speciessubgroupChild.key}}-subspecies"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.species.length > 0">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *ngFor="let species of childTaxanomy.species">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *ngIf="speciessubgroupChild.key === species.parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *ngFor="let speciesChild of species.childData">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                id="{{speciesChild.key}}-{{species.rank}}"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(species.rank, speciesChild.key, 'varietas')"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(species.rank, speciesChild.key, 'varietas')">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{speciesChild.key}}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{speciesChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <!-- varietas level -->
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <ul class="nested {{speciesChild.key}}-varietas"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.subspecies.length > 0">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *ngFor="let subspecies of childTaxanomy.subspecies">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *ngIf="speciesChild.key === subspecies.parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *ngFor="let subspeciesChild of subspecies.childData">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                id="{{subspeciesChild.key}}-{{subspecies.rank}}"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(subspecies.rank, subspeciesChild.key, 'forma')"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(subspecies.rank, subspeciesChild.key, 'forma')">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{subspeciesChild.key}}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{subspeciesChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <!-- forma level -->
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <ul class="nested {{subspeciesChild.key}}-forma"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *ngIf="childTaxanomy.varietas.length > 0">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *ngFor="let varietas of childTaxanomy.varietas">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <ng-container
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *ngIf="subspeciesChild.key === varietas.parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <li
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *ngFor="let varietasChild of varietas.childData">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                class="caret"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                id="{{varietasChild.key}}-{{varietas.rank}}"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (click)="getChildTaxonomyRank(varietas.rank, varietasChild.key, '')"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (dblclick)="filterTaxonomy(varietas.rank, varietasChild.key, '')">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <i class="fas fa-plus-circle"></i>{{varietasChild.key}}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                class="badge badge-pill badge-success">{{varietasChild.doc_count}}</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                        </li>
                                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                        </li>
                                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                                </ng-container>
                                                                                                                                                                                            </ul>
                                                                                                                                                                                        </li>
                                                                                                                                                                                    </ng-container>
                                                                                                                                                                                </ng-container>
                                                                                                                                                                            </ul>
                                                                                                                                                                        </li>
                                                                                                                                                                    </ng-container>
                                                                                                                                                                </ng-container>
                                                                                                                                                            </ul>
                                                                                                                                                        </li>
                                                                                                                                                    </ng-container>
                                                                                                                                                </ng-container>
                                                                                                                                            </ul>
                                                                                                                                        </li>
                                                                                                                                    </ng-container>
                                                                                                                                </ng-container>
                                                                                                                            </ul>
                                                                                                                        </li>
                                                                                                                    </ng-container>
                                                                                                                </ng-container>
                                                                                                            </ul>
                                                                                                        </li>
                                                                                                    </ng-container>
                                                                                                </ng-container>
                                                                                            </ul>
                                                                                        </li>
                                                                                    </ng-container>
                                                                                </ng-container>
                                                                            </ul>
                                                                        </li>
                                                                    </ng-container>
                                                                </ng-container>
                                                            </ul>
                                                        </li>
                                                    </ng-container>
                                                </ng-container>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>